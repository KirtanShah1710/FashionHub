<form [formGroup]="variantForm" (ngSubmit)="submitVariant()" class="border p-3 rounded bg-light">

    <h5 class="mb-3">{{ isEditMode ? 'Edit Variant' : 'Add Variant' }}</h5>

    <div class="row">
        <!-- SIZE -->
        <div class="col-md-3 mb-3">
            <label class="form-label">Size</label>
            <select class="form-select" formControlName="sizeId">
                <option value="">Select Size</option>
                @for (s of sizes; track s.sizeId){
                <option [value]="s.sizeId">{{ s.name }}</option>
                }

            </select>
        </div>

        <!-- COLOR -->
        <div class="col-md-3 mb-3">
            <label class="form-label">Color</label>
            <select class="form-select" formControlName="colorId">
                <option value="">Select Color</option>
                @for (c of colors; track c.colorId){
                <option [value]="c.colorId">{{ c.name }}</option>
                }

            </select>

            <!-- COLOR CIRCLE -->
            @if (variantForm.value.colorId){
            <div class="mt-2">
                <span class="color-circle" [style.background]="getColorHex(variantForm.value.colorId)"></span>
                <small class="ms-2">Selected Color</small>
            </div>
            }

        </div>

        <!-- PRICE -->
        <div class="col-md-3 mb-3">
            <label class="form-label">Price</label>
            <input type="number" class="form-control" formControlName="price">
        </div>

        <!-- STOCK -->
        <div class="col-md-3 mb-3">
            <label class="form-label">Stock</label>
            <input type="number" class="form-control" formControlName="stock">
        </div>
    </div>

    <!-- IMAGE -->
    <div class="d-flex justify-content-between align-items-center gap-3 mb-3">
        <div class="mb-3 w-100">
            <label class="form-label">Variant Image</label>
            <input type="file" class="form-control" (change)="onImageChange($event)">
        </div>

        <!-- IMAGE PREVIEW -->
        @if (imagePreview){
        <div>
            <!-- <label class="form-label">Image Preview</label><br> -->
            <img [src]="imagePreview" class="img-thumbnail p-0 shadow-sm" style="max-height: 160px;">
        </div>
        }
    </div>
    <!-- SUBMIT BUTTON -->
    <div>
        <button type="submit" class="btn btn-primary" [disabled]="submitting">
            {{ isEditMode ? 'Update Variant' : 'Add Variant' }}
        </button>
    </div>
</form>

<style>
    .color-circle {
        width: 18px;
        height: 18px;
        border-radius: 50%;
        display: inline-block;
        border: 1px solid #ccc;
        vertical-align: middle;
    }
</style>